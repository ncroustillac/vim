#!/bin/sh

# Description:
# Script used to Get Ground contents 
# folder


#===========
# Variables
#===========
script_name="$0"


#===========
# Handle SIGTERM signal
#===========
_term ()
{
  echo "$script_name forced to stop"
  exit 0
}

trap _term SIGTERM

#===========
# Functions
#===========

#===========
# Main
#===========
<<<<<<< HEAD
echo "GSM get ground contents"

=======
filename='/containers/container-as/storage/gsm-config.txt'
nrpara=0
while read line; do
    #echo "$line"
    subline=$line
    IFS='='
    read -a ARRAY_OF_STR<<< "$subline"
    if [[ "$line" =~ "ftpserver" ]]; then
     ftpserver=${ARRAY_OF_STR[1]}
     address=$(echo "$ftpserver" | cut -d '/' -f 1)
     echo "address=$address"
      nrpara=$((nrpara+1))
   elif [[ "$line" =~ "password" ]] ; then
     pass=${ARRAY_OF_STR[1]}
     echo "password=$pass"
     nrpara=$((nrpara+1))
   elif [[ "$line" =~ "username" ]] ; then
     username=${ARRAY_OF_STR[1]}
     echo "username=$username"
     nrpara=$((nrpara+1))
   fi

    n=$((n+1))
  
done < $filename
if [[ $nrpara -eq 3  ]]; then
   echo "ERROR this file needs more parameters:$filename"
   touch /containers/container-as/var/notification/to_HEATS/.fail_GSM_GETGND
   exit 1
fi
echo "GSM get ground contents"
open $address
user $username $pass
cd Update
cd CVFDR
ls -R CVFDR.txt
bye

open $address
user $username $pass
cd Update
cd FADEX
ls -R FADEX.txt
bye


open $address
user $username $pass
cd Update
cd Helicom
ls -R HELICOM.txt
bye

echo "CVFDR..." > GSMCOntents.txt
echo CVFDR.txt >>GSMCOntents.txt
echo "FADEX..." >> GSMCOntents.txt
echo FADEX.txt >>GSMCOntents.txt
echo "HELICOM..." >> GSMCOntents.txt
echo HELICOM.txt >>GSMCOntents.txt

touch /containers/container-as/var/notification/to_HEATS/.success_GSM_GETGND
>>>>>>> refs #6268 [GSM][middleware] rebase in progress
